<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Registrazione - Frontend</title>
<link rel="stylesheet" href="css/login.css">

</head>
<body>
<div id="register-form" style="margin-top: 40px;">
  <h2>Registrazione</h2>
  <input type="text" id="new-username" placeholder="Nuovo Username" /><br /><br />
  <input type="password" id="new-password" placeholder="Nuova Password" /><br /><br />
  <button class="btn btn-register" onclick="register()">
  <span class="testo">Registrati</span>
  <svg class="icona" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
    <path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5zm6-4v2h2v2h-2v2h-2v-2h-2v-2h2v-2h2z"/>
  </svg>
  </button>
  
  <a href="index.html">Torna alla Home</a>
  
  <script>
  function register() {
    const username = document.getElementById('new-username').value;
    const password = document.getElementById('new-password').value;

    const utente = {
      username: username,
      password: password
    };

    fetch('http://localhost:8080/auth/registrazione', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(utente)
    })
    .then(response => {
      if (response.ok) {
        alert('Registrazione completata! Ora puoi fare il login.');
        document.getElementById('new-username').value = '';
        document.getElementById('new-password').value = '';
      } else {
        response.text().then(text => alert('Errore nella registrazione: ' + text));
      }
    })
    .catch(error => {
      console.error('Errore:', error);
      alert('Errore di rete durante la registrazione');
    });
  }
</script>
  
</div>
</body>
</html>